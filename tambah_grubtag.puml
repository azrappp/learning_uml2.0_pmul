@startuml
mainframe "**sd** Tambah TagGroup"
hide footbox

actor "**: User**" as User
boundary "**: TagGroup Page**" as TagGroupPage
control "**: Tag GroupController**" as TagGroupController
entity  "**: Tag Group**" as TagGroupRepository

User -> TagGroupPage : submitTagGroup(name, description, tags)
activate TagGroupPage

TagGroupPage -> TagGroupPage : validateForm(name)
activate TagGroupPage
deactivate TagGroupPage

opt form invalid
    TagGroupPage -> TagGroupPage : displayError("Tag group name is required")
    TagGroupPage --> User : showError("Tag group name is required")
    deactivate TagGroupPage
    return
end

' If valid, send to controller
TagGroupPage -> TagGroupController : createTagGroup(name, description, tags)
deactivate TagGroupPage
activate TagGroupController

TagGroupController -> TagGroupRepository : save(name, description, tags)
activate TagGroupRepository
TagGroupRepository --> TagGroupController : saveResult(status, existing?)
deactivate TagGroupRepository

alt tag group already exists
    TagGroupController --> TagGroupPage : error("Tag group already exists")
    deactivate TagGroupController
    TagGroupPage -> TagGroupPage : displayError("Tag group already exists")
    TagGroupPage --> User : showError("Tag group already exists")
else new tag group created
    TagGroupController --> TagGroupPage : saveStatus(success)
    deactivate TagGroupController
    TagGroupPage -> TagGroupPage : reloadList()
    TagGroupPage --> User : showMessage("Tag group created successfully")
end

deactivate TagGroupPage
@enduml
