@startuml
mainframe **sd**TambahTagGroup
hide footbox

actor "**:User**" as User
boundary "**:TagGroupPage**" as TagGroupPage
control "**:TagGroupController**" as TagGroupController
entity "**:TagGroup**" as TagGroupRepository

User -> TagGroupPage : saveTagGroup(name, description)
activate TagGroupPage

' Pesan divalidasi dan mengembalikan status'
TagGroupPage -> TagGroupPage : validateForm(name)
activate TagGroupPage
deactivate TagGroupPage
' Guard [opt] sekarang menggunakan nilai balasan secara eksplisit'
opt validationStatus == "invalid"
    TagGroupPage -> TagGroupPage : displayError("Tag group name is required")
    activate TagGroupPage
    deactivate TagGroupPage
end

' Guard [alt] sekarang menggunakan nilai balasan secara eksplisit'
alt validationStatus == "valid"
    TagGroupPage -> TagGroupController : createNewTagGroup(name, description)
    activate TagGroupController

        TagGroupController -> TagGroupRepository : save(name, description)
        activate TagGroupRepository
        ' Pesan balasan harus berupa nilai yang dapat dievaluasi'
        TagGroupRepository --> TagGroupController : saveStatus
        deactivate TagGroupRepository

        ' Guard disesuaikan untuk tag group'
        alt saveStatus == "tag_group_already_exists"
            TagGroupController --> TagGroupPage : error("Tag group already exists")
            TagGroupPage -> TagGroupPage : displayError("Tag group already exists")
            activate TagGroupPage
            deactivate TagGroupPage
        else saveStatus == "success"
            TagGroupController --> TagGroupPage : "success"
            TagGroupPage -> TagGroupPage : reloadList()
            activate TagGroupPage
            deactivate TagGroupPage
        end

    deactivate TagGroupController
end

deactivate TagGroupPage
@enduml